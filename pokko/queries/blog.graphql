query ListPosts($skip: Int! = 0, $take: Int! = 10) {
  entries {
    allPostBase(orderBy: DATE_DESC, skip: $skip, take: $take, inherit: true) {
      totalCount
      ...PostListing
    }
  }
}

query GetPost($path: [String!]!, $alias: String!) {
  entry(path: $path) {
    ... on IPostBase {
      id
      title
      alias
      date
      tags
      category
      summary
      image {
        url(process: { height: 600, width: 1200, fit: COVER, position: CENTRE })
        height
        width
      }
    }
    ... on PostMarkdown {
      body
    }
  }
  entries {
    allPostBase(inherit: true, filter: { legacyAlias: { equalTo: $alias } }) {
      nodes {
        pokko {
          path
        }
      }
    }
  }
}

fragment PostListing on PostBaseCollection {
  nodes {
    ...PostSummary
  }
  pageInfo {
    hasNextPage
    hasPrevPage
  }
}

fragment PostSummary on IPostBase {
  id
  title
  date
  summary
  category
  alias
  pokko {
    path
  }
}

query PostCount {
  entries {
    allPostBase(inherit: true) {
      totalCount
    }
  }
}
